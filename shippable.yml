language: node_js

env:
  - IMAGE_NAME=balavignesh/noidea:$BRANCH.$SHIPPABLE_BUILD_NUMBER
  matrix:
    - M1=one
    - M2=two
build:
  ci:
    - sudo docker build --rm -t=$IMAGE_NAME:$BRANCH.$SHIPPABLE_BUILD_NUMBER .

  post_ci:
    - sudo docker push $IMAGE_NAME:$BRANCH.$SHIPPABLE_BUILD_NUMBER

integrations:
  hub:
    - integrationName: "myDocker"
      type: docker
      branches:
          only:
            - master
